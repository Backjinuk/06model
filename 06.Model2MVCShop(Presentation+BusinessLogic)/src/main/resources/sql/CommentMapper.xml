<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		

<mapper namespace="CommentMapper">

	<resultMap type="comment" id="commentSelectmap">
		<result property="prodNo.prodNo" column="prod_no"  		jdbcType="INTEGER"/>
		<result property="userId.userId" column="user_id"  		jdbcType="VARCHAR"/>
		<result property="commentNo" 	 column="coment_no" 	jdbcType="INTEGER"/>
		<result property="commentTitle"	 column="coment_title"	jdbcType="VARCHAR"/>
		<result property="regDate"		 column="reg_date"  	jdbcType="DATE"/>
	</resultMap>
	
	<insert id="addComment" parameterType="comment">
	INSERT 
	INTO coment( coment_no,prod_no,user_id,coment_title,reg_date)
		VALUES(	 seq_coment_tran_no.nextval,
					#{prodNo.prodNo},
					#{userId.userId},
					#{commentTitle},
					SYSDATE)	
	</insert>
	
	<select id="listComment" parameterType="map" resultMap="commentSelectmap">
		SELECT	*
		FROM coment
		WHERE prod_no =(	SELECT
		                    prod_no
		                    FROM product
		                    WHERE prod_no = #{prodNo})
		ORDER BY coment_no
	</select>
	
	<update id="updateComment" parameterType="comment">
	UPDATE coment
	<set>
		coment_title = #{commentTitle},
		reg_date = SYSDATE
	</set>	
		WHERE coment_no = #{commentNo} 
	</update>
	
	<delete id="deleteComment" parameterType="comment">
		DELETE coment
		WHERE coment_no = #{commentNo} 
	</delete>
	
	<select id="getComment" parameterType="int" resultMap="commentSelectmap">
		SELECT *
		FROM coment
		WHERE coment_no = #{commentNo}
	</select>


</mapper>